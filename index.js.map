{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst baseUrl = \"https://pixabay.com\";\nconst endPoint = \"/api/\";\n\n\n\nexport function getImg (searchName, page, perPage) {\n    const params = new URLSearchParams({\n        key: '48878301-11eef390b295f332c6628756b',\n        q: searchName,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: perPage,\n        page: page,\n    });\n    const url = baseUrl + endPoint + `?${params}`;\n    return axios.get(url)\n\n}","\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n};\n\nfunction createElemet(img) {\n  return `<li>\n \n  <div class=\"card\">\n   <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n  <img class=\"card-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\"/>\n  </a>\n  <div class=\"card-info\">\n  <div class=\"info-container\">\n    <div class=\"info-labels\">\n      <span>Likes</span>\n      <span>Views</span>\n      <span>Comments</span>\n      <span>Downloads</span>\n    </div>\n    <div class=\"info-values\">\n      <span>${img.likes}</span>\n      <span>${img.views}</span>\n      <span>${img.comments}</span>\n      <span>${img.downloads}</span>\n    </div>\n  </div>\n</div>\n\n</li>`\n}\n\nexport function createElemets(images) {\n  return images.map(createElemet).join('');\n}\n\n\n\n\n","import { getImg } from './js/pixabay-api.js';\nimport { createElemets } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst refs = {\n  btn: document.querySelector('.btn-search'),\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.msg'),\n  btnLoadMore: document.querySelector('.btn-load'),\n  loaderSec: document.querySelector('.loader'),\n};\n\nconst params = {\n  searchText: null,\n  page: null,\n  total: null,\n  perPage: 40,\n};\n\nrefs.form.addEventListener('submit', async e => {\n  e.preventDefault();\n  hideLoadMoreBtn();\n  params.page = 1;\n  params.searchText = e.target.elements.bookSearch.value.trim();\n  refs.gallery.innerHTML = '';\n  if (params.searchText === '') {\n    iziToast.show({\n      backgroundColor: 'rgba(255, 67, 67, 0.68)',\n      messageColor: `rgba(255, 255, 255, 1)`,\n      close: `true`,\n      position: 'topRight',\n      title: '🚫',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Поле пошуку порожнє',\n    });\n    return;\n  } else {\n    refs.loader.innerHTML = '<span class=\"loader\"></span>';\n    try {\n      const res = await getImg(params.searchText, params.page, params.perPage);\n      if (res.data.hits.length === 0) {\n        iziToast.show({\n          backgroundColor: 'rgba(255, 67, 67, 0.68)',\n          messageColor: `rgba(255, 255, 255, 1)`,\n          close: `true`,\n          position: 'topRight',\n          title: '🚫',\n          titleColor: '#fff',\n          titleSize: '16px',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        refs.loader.innerHTML = '';\n      } else {\n        const pushGallery = createElemets(res.data.hits);\n        refs.gallery.innerHTML = pushGallery;\n        lightbox.refresh();\n        refs.loader.innerHTML = '';\n        refs.form.reset();\n        params.total = res.data.total;\n        checkBtnStatus();\n      }\n    } catch (error) {\n      refs.loader.innerHTML = '';\n      iziToast.show({\n        backgroundColor: 'rgba(255, 67, 67, 0.68)',\n        close: `true`,\n        position: 'topRight',\n        title: '🚫',\n        titleColor: '#fff',\n        titleSize: '16px',\n        messageColor: `rgba(255, 255, 255, 1)`,\n        message: 'Охохо.....щось пішло не так....',\n      });\n      console.log(error);\n    }\n  }\n});\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n  showSpinner();\n  params.page += 1;\n  checkBtnStatus();\n  const res = await getImg(params.searchText, params.page, params.perPage);\n  const markup = createElemets(res.data.hits);\n  hideSpinner();\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n  scrollPage();\n});\n\nfunction checkBtnStatus() {\n  const perPage = params.perPage;\n  const maxPage = Math.ceil(params.total / perPage);\n\n  if (params.page >= maxPage) {\n    hideLoadMoreBtn();\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n}\nfunction showLoadMoreBtn() {\n  refs.btnLoadMore.hidden = false;\n}\n\nfunction hideLoadMoreBtn() {\n  refs.btnLoadMore.hidden = true;\n}\n\nfunction showSpinner() {\n  refs.loaderSec.classList.remove('hidden');\n}\n\nfunction hideSpinner() {\n  refs.loaderSec.classList.add('hidden');\n}\n\nfunction scrollPage() {\n  const info = refs.gallery.firstElementChild.getBoundingClientRect();\n  const height = info.height;\n  window.scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n}"],"names":["baseUrl","endPoint","getImg","searchName","page","perPage","params","url","axios","createElemet","img","createElemets","images","lightbox","SimpleLightbox","refs","hideLoadMoreBtn","iziToast","res","pushGallery","checkBtnStatus","error","showSpinner","markup","hideSpinner","scrollPage","maxPage","showLoadMoreBtn","height"],"mappings":"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"}